<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>vibeclaw â€” AI coding agents in your browser</title>
    <meta name="description" content="Run OpenClaw coding agents entirely in the browser. Connect to your live gateway or boot a self-contained sandbox. No server required.">
    <meta name="keywords" content="openclaw, ai agent, coding agent, browser, javascript, runtime, webgpu, sandbox, playground">
    <meta name="author" content="vibeclaw">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://vibeclaw.dev/">

    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://vibeclaw.dev/">
    <meta property="og:title" content="vibeclaw â€” AI coding agents in your browser">
    <meta property="og:description" content="Run OpenClaw coding agents entirely in the browser. Connect to your live gateway or boot a self-contained sandbox.">
    <meta property="og:image" content="https://vibeclaw.dev/og-image.png?v=2">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:site_name" content="vibeclaw.dev">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="vibeclaw â€” AI coding agents in your browser">
    <meta name="twitter:description" content="Run OpenClaw coding agents entirely in the browser. Connect to your live gateway or boot a self-contained sandbox.">
    <meta name="twitter:image" content="https://vibeclaw.dev/og-image.png?v=2">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fragment+Mono:wght@400;500;600;700&family=DM+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        --black: #0c0c0c;
        --surface: #141414;
        --surface-2: #1a1a1a;
        --border: #2a2a2a;
        --border-bright: #3a3a3a;
        --text: #c0c0c0;
        --text-bright: #f0f0f0;
        --text-dim: #999;
        --accent: #ff5c5c;
        --accent-dim: #ff4040;
        --accent-bg: rgba(255, 92, 92, 0.06);
        --accent-border: rgba(255, 92, 92, 0.15);
        --mono: 'Fragment Mono', 'JetBrains Mono', 'Menlo', monospace;
        --sans: 'DM Sans', system-ui, sans-serif;
        --code: 'JetBrains Mono', 'SF Mono', 'Menlo', monospace;
      }

      * { box-sizing: border-box; margin: 0; padding: 0; }

      html { scroll-behavior: smooth; scroll-padding-top: 70px; }
      body {
        font-family: var(--sans);
        background: var(--black);
        color: var(--text);
        min-height: 100vh;
        -webkit-font-smoothing: antialiased;
        position: relative;
      }

      /* Scanline overlay */
      body::after {
        content: '';
        position: fixed;
        inset: 0;
        background: repeating-linear-gradient(
          0deg,
          transparent,
          transparent 2px,
          rgba(0,0,0,0.03) 2px,
          rgba(0,0,0,0.03) 4px
        );
        pointer-events: none;
        z-index: 1;
      }

      /* â”€â”€ Nav â”€â”€ */
      nav {
        position: sticky;
        top: 0;
        z-index: 100;
        background: rgba(12, 12, 12, 0.92);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border-bottom: 1px solid var(--border);
      }
      .nav-inner {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 24px;
        height: 52px;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .nav-logo {
        font-family: var(--mono);
        font-size: 0.9rem;
        font-weight: 600;
        color: var(--accent);
        text-decoration: none;
        letter-spacing: -0.01em;
      }
      .nav-links {
        display: flex;
        gap: 24px;
        list-style: none;
      }
      .nav-links a {
        font-family: var(--mono);
        font-size: 0.78rem;
        color: var(--text-dim);
        text-decoration: none;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        transition: color 0.15s;
      }
      .nav-links a:hover { color: var(--text-bright); }

      /* â”€â”€ Hero â”€â”€ */
      .hero {
        padding: 96px 24px 32px;
        max-width: 1100px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        gap: 48px;
      }
      .hero-content {
        flex: 1;
        min-width: 0;
      }
      .hero-visual {
        flex: 0 0 400px;
        height: 400px;
        position: relative;
      }
      .hero-visual canvas {
        display: block;
        width: 100%;
        height: 100%;
      }
      .hero-label {
        font-family: var(--mono);
        font-size: 0.72rem;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--accent);
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .hero-label::before {
        content: '';
        width: 20px;
        height: 1px;
        background: var(--accent);
      }
      .hero h1 {
        font-family: var(--sans);
        font-size: clamp(2.8rem, 7vw, 4.5rem);
        font-weight: 700;
        color: var(--text-bright);
        letter-spacing: -0.04em;
        line-height: 1.05;
        margin-bottom: 24px;
        max-width: 700px;
      }
      .hero .subtitle {
        font-size: 1.1rem;
        color: var(--text);
        line-height: 1.65;
        max-width: 520px;
        margin-bottom: 40px;
      }

      /* Install box */
      .install-box {
        display: inline-flex;
        align-items: center;
        gap: 14px;
        background: var(--surface);
        border: 1px solid var(--border);
        padding: 14px 18px;
        margin-bottom: 28px;
        font-family: var(--mono);
        font-size: 0.88rem;
      }
      .install-box .prompt { color: var(--accent); user-select: none; }
      .install-box code { color: var(--text-bright); }
      .install-box button {
        background: none;
        border: 1px solid var(--border);
        color: var(--text-dim);
        cursor: pointer;
        padding: 4px 6px;
        display: flex;
        align-items: center;
        transition: color 0.15s, border-color 0.15s;
      }
      .install-box button:hover {
        color: var(--accent);
        border-color: var(--accent-border);
      }
      .install-box button svg { width: 14px; height: 14px; }

      /* CTA row */
      .cta-row {
        display: flex;
        gap: 12px;
        margin-bottom: 32px;
      }
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 12px 28px;
        font-family: var(--mono);
        font-size: 0.82rem;
        font-weight: 500;
        text-decoration: none;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        transition: all 0.15s;
        border: 1px solid transparent;
      }
      .btn-primary {
        background: var(--accent);
        color: var(--black);
      }
      .btn-primary:hover {
        background: #ff7070;
        box-shadow: 0 0 20px rgba(255, 92, 92, 0.25);
      }
      .btn-secondary {
        background: transparent;
        border-color: var(--accent);
        color: var(--accent);
      }
      .btn-secondary:hover {
        background: rgba(255,92,92,0.1);
        border-color: var(--accent);
        color: var(--text-bright);
      }
      .btn svg { width: 15px; height: 15px; }

      /* Badges */
      .badges {
        display: flex;
        gap: 8px;
        flex-wrap: wrap;
      }
      .badges a { text-decoration: none; line-height: 0; }
      .badges img { height: 20px; }

      /* â”€â”€ Section â”€â”€ */
      .section {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 24px;
      }
      .section-header {
        padding: 80px 0 48px;
        border-top: 1px solid var(--border);
      }
      .section-label {
        font-family: var(--mono);
        font-size: 0.68rem;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--text-dim);
        margin-bottom: 12px;
      }
      .section-header h2 {
        font-family: var(--sans);
        font-size: 1.6rem;
        font-weight: 700;
        color: var(--text-bright);
        letter-spacing: -0.02em;
      }

      /* â”€â”€ Code examples â”€â”€ */
      .code-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1px;
        background: var(--border);
        border: 1px solid var(--border);
        margin-bottom: 80px;
      }
      @media (max-width: 900px) {
        .code-grid { grid-template-columns: 1fr; }
      }
      .code-card {
        background: var(--surface);
        overflow: hidden;
      }
      .code-card:hover { background: var(--surface-2); }
      .code-tab {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        border-bottom: 1px solid var(--border);
        font-family: var(--mono);
        font-size: 0.72rem;
        color: var(--text-dim);
      }
      .code-tab .indicator {
        width: 6px;
        height: 6px;
        background: var(--accent);
      }
      .code-card pre {
        padding: 16px;
        overflow-x: auto;
        font-family: var(--mono);
        font-size: 0.75rem;
        line-height: 1.7;
        color: var(--text);
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
      }
      /* Syntax â€” muted, monochrome-forward with accent pops */
      .kw { color: #ff3333; }
      .str { color: #e8c872; }
      .fn { color: var(--text-bright); }
      .cm { color: #888; }
      .op { color: #888; }
      .num { color: #e8c872; }

      /* â”€â”€ Features â”€â”€ */
      .features-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 1px;
        background: var(--border);
        border: 1px solid var(--border);
        margin-bottom: 80px;
      }
      @media (max-width: 768px) {
        .features-grid { grid-template-columns: 1fr; }
      }
      @media (min-width: 769px) and (max-width: 1024px) {
        .features-grid { grid-template-columns: repeat(2, 1fr); }
      }
      .feature-card {
        background: var(--surface);
        padding: 28px 24px;
        transition: background 0.15s;
      }
      .feature-card:hover { background: var(--surface-2); }
      .feature-icon {
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 16px;
        border: 1px solid var(--accent-border);
        background: var(--accent-bg);
      }
      .feature-icon svg {
        width: 16px;
        height: 16px;
        stroke: var(--accent);
        fill: none;
        stroke-width: 1.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }
      .feature-card h3 {
        font-family: var(--mono);
        font-size: 0.82rem;
        font-weight: 600;
        color: var(--text-bright);
        margin-bottom: 8px;
        letter-spacing: -0.01em;
      }
      .feature-card p {
        font-size: 0.85rem;
        color: var(--text-dim);
        line-height: 1.55;
      }

      /* â”€â”€ Demos â”€â”€ */
      .demos-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 1px;
        background: var(--border);
        border: 1px solid var(--border);
        margin-bottom: 80px;
      }
      @media (max-width: 900px) {
        .demos-grid { grid-template-columns: repeat(2, 1fr); }
      }
      @media (max-width: 520px) {
        .demos-grid { grid-template-columns: 1fr; }
      }
      .demo-card {
        display: block;
        background: var(--surface);
        padding: 24px 20px;
        text-decoration: none;
        color: inherit;
        transition: background 0.15s;
      }
      .demo-card:hover {
        background: var(--surface-2);
      }
      .demo-card:hover h3 { color: var(--accent); }
      .demo-card h3 {
        font-family: var(--mono);
        font-size: 0.85rem;
        font-weight: 600;
        color: var(--text-bright);
        margin-bottom: 8px;
        transition: color 0.15s;
      }
      .demo-card p {
        font-size: 0.82rem;
        color: var(--text-dim);
        line-height: 1.5;
        margin-bottom: 14px;
      }
      .demo-tag {
        display: inline-block;
        padding: 2px 8px;
        font-family: var(--mono);
        font-size: 0.65rem;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        background: var(--accent-bg);
        color: var(--accent-dim);
        border: 1px solid var(--accent-border);
      }

      /* â”€â”€ FAQ â”€â”€ */
      .faq-list {
        display: flex;
        flex-direction: column;
        gap: 1px;
        background: var(--border);
        border: 1px solid var(--border);
      }
      .faq-item {
        background: var(--surface);
      }
      .faq-item summary {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 16px 20px;
        font-family: var(--sans);
        font-size: 0.92rem;
        font-weight: 500;
        color: var(--text);
        cursor: pointer;
        list-style: none;
        transition: color 0.15s, background 0.15s;
      }
      .faq-item summary::-webkit-details-marker { display: none; }
      .faq-item summary::before {
        content: '+';
        font-family: var(--mono);
        font-size: 0.85rem;
        color: var(--text-dim);
        flex-shrink: 0;
        width: 18px;
        text-align: center;
        transition: color 0.15s;
      }
      .faq-item[open] summary::before {
        content: '\2212';
        color: var(--accent);
      }
      .faq-item summary:hover {
        color: var(--text-bright);
        background: rgba(255,255,255,0.02);
      }
      .faq-item[open] summary {
        color: var(--text-bright);
        border-bottom: 1px solid var(--border);
      }
      .faq-answer {
        padding: 16px 20px 16px 50px;
        font-size: 0.88rem;
        line-height: 1.7;
        color: var(--text);
      }
      .faq-answer a {
        color: var(--accent);
        text-decoration: none;
      }
      .faq-answer a:hover { text-decoration: underline; }
      .faq-answer code {
        font-family: var(--mono);
        font-size: 0.82em;
        background: var(--black);
        border: 1px solid var(--border);
        padding: 1px 5px;
        color: var(--accent);
      }

      /* â”€â”€ Footer â”€â”€ */
      footer {
        border-top: 1px solid var(--border);
        padding: 28px 24px;
        max-width: 1100px;
        margin: 0 auto;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      footer .footer-links {
        display: flex;
        gap: 20px;
      }
      footer a {
        font-family: var(--mono);
        font-size: 0.72rem;
        color: var(--text-dim);
        text-decoration: none;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        transition: color 0.15s;
      }
      footer a:hover { color: var(--text-bright); }
      footer .footer-byline {
        font-family: var(--mono);
        font-size: 0.7rem;
        color: var(--text-dim);
      }
      footer .footer-byline a {
        color: var(--accent);
        text-transform: none;
        letter-spacing: 0;
      }
      footer .license {
        font-family: var(--mono);
        font-size: 0.7rem;
        color: var(--text-dim);
      }

      /* â”€â”€ Responsive â”€â”€ */
      @media (max-width: 900px) {
        .hero-visual { display: none; }
      }
      @media (max-width: 600px) {
        .nav-links { gap: 14px; }
        .nav-links a { font-size: 0.7rem; }
        .hero { padding: 64px 20px 56px; }
        .hero h1 { font-size: 2.2rem; }
        .cta-row { flex-direction: column; }
        .btn { justify-content: center; }
        .forge-steps { grid-template-columns: 1fr !important; }
        footer { flex-direction: column; gap: 12px; text-align: center; }
      }

      /* â”€â”€ Playground â”€â”€ */
      .pg {
        max-width: 1100px;
        margin: 0 auto;
        padding: 0 24px 80px;
      }
      .pg-shell {
        border: 1px solid var(--border);
        background: var(--surface);
        overflow: hidden;
      }
      .pg-tabs {
        display: flex;
        align-items: stretch;
        background: var(--black);
        border-bottom: 1px solid var(--border);
        overflow-x: auto;
        scrollbar-width: none;
      }
      .pg-tabs::-webkit-scrollbar { display: none; }
      .pg-tab {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 11px 20px;
        font-family: var(--mono);
        font-size: 0.72rem;
        color: var(--text-dim);
        background: none;
        border: none;
        border-bottom: 2px solid transparent;
        cursor: pointer;
        white-space: nowrap;
        transition: color 0.15s, border-color 0.15s, background 0.15s;
      }
      .pg-tab:hover {
        color: var(--text);
        background: rgba(255,255,255,0.02);
      }
      .pg-tab.active {
        color: var(--text-bright);
        border-bottom-color: var(--accent);
      }
      .pg-tab .dot {
        width: 6px;
        height: 6px;
        background: var(--text-dim);
        border-radius: 0;
        flex-shrink: 0;
        transition: background 0.3s;
      }
      .pg-tab.active .dot { background: var(--accent); }
      .pg-tab.running .dot {
        background: var(--accent);
        animation: pulse-dot 1.2s ease infinite;
      }
      .pg-tab.error .dot { background: #ff6b6b; }
      @keyframes pulse-dot {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.3; }
      }
      .pg-status {
        margin-left: auto;
        padding: 0 16px;
        font-family: var(--mono);
        font-size: 0.65rem;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        color: var(--text-dim);
        display: flex;
        align-items: center;
        gap: 6px;
        white-space: nowrap;
      }
      .pg-body {
        display: grid;
        grid-template-columns: 50fr 50fr;
        height: 580px;
      }
      .pg-code-panel {
        display: flex;
        flex-direction: column;
        border-right: 1px solid var(--border);
        min-width: 0;
        overflow: hidden;
      }
      .pg-code-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-bottom: 1px solid var(--border);
        background: rgba(0,0,0,0.2);
      }
      .pg-code-header .filename {
        font-family: var(--mono);
        font-size: 0.7rem;
        color: var(--text-dim);
      }
      .pg-code-wrap {
        flex: 1;
        overflow: hidden;
        min-height: 0;
        position: relative;
      }
      .pg-code-wrap textarea {
        width: 100%;
        height: 100%;
        padding: 16px;
        margin: 0;
        border: none;
        resize: none;
        background: transparent;
        font-family: var(--mono);
        font-size: 0.9rem;
        line-height: 1.7;
        color: var(--accent);
        tab-size: 2;
        outline: none;
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
      }
      .pg-code-wrap textarea::selection {
        background: rgba(255, 50, 50, 0.2);
      }
      .pg-code-wrap pre {
        width: 100%;
        height: 100%;
        padding: 16px;
        margin: 0;
        overflow: auto;
        font-family: var(--mono);
        font-size: 0.9rem;
        line-height: 1.7;
        color: #cc8888;
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
      }
      .pg-code-wrap .kw { color: #ff5c5c; }           /* keywords: import, from, const, await */
      .pg-code-wrap .fn { color: #ff9e9e; }           /* function/method names */
      .pg-code-wrap .str { color: #cc6666; }           /* strings */
      .pg-code-wrap .num { color: #ff7070; }           /* numbers */
      .pg-code-wrap .cm { color: #664444; }            /* comments */
      .pg-code-wrap .op { color: #884444; }            /* operators, punctuation */
      .pg-code-wrap .prop { color: #dd8888; }          /* property names */
      .pg-code-panel[hidden] { display: none; }
      .pg-run-bar {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 10px 16px;
        border-top: 1px solid var(--border);
        background: var(--black);
      }
      .pg-run-btn {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 7px 20px;
        font-family: var(--mono);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.04em;
        background: transparent;
        color: var(--accent);
        border: 1px solid var(--accent);
        cursor: pointer;
        transition: background 0.15s, box-shadow 0.15s, color 0.15s;
      }
      .pg-run-btn:hover {
        background: rgba(255, 92, 92, 0.1);
        box-shadow: 0 0 16px rgba(255, 92, 92, 0.15);
      }
      .pg-run-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        box-shadow: none;
      }
      .pg-run-btn svg { width: 12px; height: 12px; }
      .pg-run-hint {
        font-family: var(--mono);
        font-size: 0.65rem;
        color: var(--text-dim);
      }
      .pg-output-panel {
        display: flex;
        flex-direction: column;
        min-width: 0;
        overflow: hidden;
      }
      .pg-terminal-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-bottom: 1px solid var(--border);
        background: rgba(0,0,0,0.2);
      }
      .pg-terminal-header .label {
        font-family: var(--mono);
        font-size: 0.65rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-dim);
      }
      .pg-terminal {
        flex: 1;
        padding: 12px 16px;
        font-family: var(--mono);
        font-size: 0.78rem;
        line-height: 1.65;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: var(--border) transparent;
        min-height: 0;
      }
      .pg-terminal .t-info { color: var(--text-dim); }
      .pg-terminal .t-ok { color: var(--accent); }
      .pg-terminal .t-err { color: #ff6b6b; }
      .pg-terminal .t-ts {
        color: #555;
        user-select: none;
        margin-right: 6px;
      }
      .pg-terminal .t-log { color: var(--text); }
      /* Chat formatting */
      .chat-chip {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 2px 10px;
        margin: 2px 4px 2px 0;
        border: 1px solid var(--accent);
        border-radius: 12px;
        font-size: 0.8rem;
        color: var(--accent);
        background: rgba(255,92,92,0.08);
        white-space: nowrap;
      }
      .chat-file {
        display: inline-flex;
        align-items: center;
        padding: 1px 8px;
        margin: 1px 2px;
        background: rgba(255,92,92,0.06);
        border-left: 2px solid var(--accent);
        font-size: 0.8rem;
        color: var(--accent);
        font-family: var(--mono);
      }
      .chat-codeblock {
        margin: 6px 0;
        border: 1px solid var(--border);
        border-radius: 4px;
        overflow: hidden;
        background: rgba(0,0,0,0.3);
      }
      .chat-codeblock-header {
        padding: 4px 10px;
        font-size: 0.7rem;
        color: var(--text-dim);
        background: rgba(0,0,0,0.2);
        border-bottom: 1px solid var(--border);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      .chat-codeblock pre {
        padding: 10px 12px;
        margin: 0;
        font-family: var(--mono);
        font-size: 0.85rem;
        line-height: 1.5;
        color: var(--accent);
        overflow-x: auto;
      }
      .chat-inline-code {
        background: rgba(255,92,92,0.1);
        padding: 1px 5px;
        border-radius: 2px;
        color: var(--accent);
        font-family: var(--mono);
        font-size: 0.85em;
      }
      .chat-heading {
        font-weight: 700;
        font-size: 0.95em;
        color: var(--text-bright);
        margin: 6px 0 2px;
      }
      .chat-bullet {
        padding-left: 16px;
        position: relative;
        margin: 2px 0;
      }
      .chat-bullet::before {
        content: 'â€¢';
        position: absolute;
        left: 4px;
        color: var(--accent);
      }
      .pg-preview-header {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 8px 16px;
        border-top: 1px solid var(--border);
        border-bottom: 1px solid var(--border);
        background: rgba(0,0,0,0.2);
      }
      .pg-preview-header .label {
        font-family: var(--mono);
        font-size: 0.65rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-dim);
      }
      .pg-preview-url {
        font-family: var(--mono);
        font-size: 0.65rem;
        color: var(--accent-dim);
        margin-left: auto;
        opacity: 0;
        transition: opacity 0.2s;
      }
      .pg-preview-url.visible { opacity: 1; }
      .pg-preview {
        flex: 0 0 320px;
        background: #0e0e1a;
        position: relative;
      }
      .pg-preview iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
      }
      .pg-preview-placeholder {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: var(--mono);
        font-size: 0.72rem;
        color: #444;
        pointer-events: none;
      }
      .pg-preview-placeholder.hidden { display: none; }
      @media (max-width: 768px) {
        .pg-body {
          grid-template-columns: 1fr;
          height: auto;
        }
        .pg-code-panel { border-right: none; border-bottom: 1px solid var(--border); max-height: 360px; }
        .pg-output-panel { max-height: 360px; }
        .pg-preview { flex: 0 0 180px; }
      }

      /* â”€â”€ Entrance animations â”€â”€ */
      @keyframes fadeUp {
        from { opacity: 0; transform: translateY(16px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .hero-label, .hero h1, .hero .subtitle,
      .install-box, .cta-row, .badges {
        animation: fadeUp 0.5s ease both;
      }
      .hero h1 { animation-delay: 0.05s; }
      .hero .subtitle { animation-delay: 0.1s; }
      .install-box { animation-delay: 0.15s; }
      .cta-row { animation-delay: 0.2s; }
      .badges { animation-delay: 0.25s; }
    </style>
  </head>
  <body>

    <!-- Nav -->
    <nav>
      <div class="nav-inner">
        <a href="./" class="nav-logo">ðŸ¦€ vibeclaw.dev</a>
        <ul class="nav-links">
          <li><a href="/forge.html">Forge</a></li>
          <li><a href="/library.html">My Servers</a></li>
          <!-- <li><a href="/chat.html">Chat</a></li> -->
          <li class="nav-more-wrap" style="position:relative;">
            <button id="nav-more-btn" style="background:none;border:1px solid var(--border);border-radius:4px;padding:3px 10px;font-family:var(--mono);font-size:0.72rem;color:var(--text-dim);cursor:pointer;display:inline-flex;align-items:center;gap:4px;transition:all 0.15s;">
              More <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:10px;height:10px;"><polyline points="6 9 12 15 18 9"/></svg>
            </button>
            <div id="nav-more-menu" style="display:none;position:absolute;top:calc(100% + 6px);right:0;background:var(--surface-2);border:1px solid var(--border);border-radius:8px;padding:6px 0;min-width:180px;z-index:1000;box-shadow:0 8px 24px rgba(0,0,0,0.4);">
              <a href="./docs/" style="display:block;padding:8px 16px;font-family:var(--mono);font-size:0.75rem;color:var(--text);text-decoration:none;transition:background 0.1s;">Docs</a>
              <a href="#demos" style="display:block;padding:8px 16px;font-family:var(--mono);font-size:0.75rem;color:var(--text);text-decoration:none;transition:background 0.1s;">Demos</a>
              <div style="height:1px;background:var(--border);margin:4px 0;"></div>
              <a href="https://openclaw.ai" style="display:block;padding:8px 16px;font-family:var(--mono);font-size:0.75rem;color:var(--text);text-decoration:none;transition:background 0.1s;">OpenClaw</a>
              <a href="https://github.com/macaly/almostnode" style="display:block;padding:8px 16px;font-family:var(--mono);font-size:0.75rem;color:var(--text);text-decoration:none;transition:background 0.1s;">almostnode</a>
              <a href="https://github.com/jasonkneen/vibeclaw" style="display:block;padding:8px 16px;font-family:var(--mono);font-size:0.75rem;color:var(--text);text-decoration:none;transition:background 0.1s;">GitHub</a>
              <a href="https://x.com/i/communities/2022846557700145266" style="display:block;padding:8px 16px;font-family:var(--mono);font-size:0.75rem;color:var(--text);text-decoration:none;transition:background 0.1s;display:flex;align-items:center;gap:6px;"><svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px;"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>Community</a>
            </div>
          </li>
          <li id="upgrade-container" style="margin-left:4px;"></li>
          <li id="auth-container" style="margin-left:4px;"></li>
        </ul>
      </div>
    </nav>
    <script>
      (function() {
        const btn = document.getElementById('nav-more-btn');
        const menu = document.getElementById('nav-more-menu');
        if (!btn || !menu) return;
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const open = menu.style.display !== 'none';
          menu.style.display = open ? 'none' : 'block';
          btn.style.borderColor = open ? 'var(--border)' : 'var(--accent)';
          btn.style.color = open ? 'var(--text-dim)' : 'var(--accent)';
        });
        document.addEventListener('click', () => {
          menu.style.display = 'none';
          btn.style.borderColor = 'var(--border)';
          btn.style.color = 'var(--text-dim)';
        });
        menu.querySelectorAll('a').forEach(a => {
          a.addEventListener('mouseenter', () => a.style.background = 'var(--surface)');
          a.addEventListener('mouseleave', () => a.style.background = 'transparent');
        });
      })();
    </script>

    <!-- Hero -->
    <section class="hero">
      <div class="hero-content">
      <div class="hero-label">Open Source Â· Powered by almostnode</div>
      <h1>Try <span style="color:var(--accent);">OpenClaw</span><br>in your browser in less than <span id="hero-time" style="display:inline-block;transition:opacity 0.4s ease, transform 0.4s ease;">3s</span></h1>
      <p class="subtitle">No server required. Runs locally in your browser.</p>

      <div class="cta-row">
        <button class="btn btn-primary pg-launch" data-action="sandbox" style="background:var(--accent);color:#000;border:1px solid var(--accent);display:inline-flex;align-items:center;gap:8px;cursor:pointer;font-weight:700;text-transform:uppercase;letter-spacing:0.04em;"><svg viewBox="0 0 24 24" fill="currentColor" style="width:14px;height:14px;"><polygon points="5 3 19 12 5 21 5 3"/></svg> Boot Your Server Now</button>
        <!-- Build/Demos buttons moved below playground -->
      </div>

      <div class="badges" style="display:flex;align-items:center;justify-content:space-between;width:100%;max-width:700px;">
        <div style="display:flex;gap:8px;flex-wrap:wrap;">
          <a href="https://github.com/jasonkneen/vibeclaw"><img src="https://img.shields.io/badge/ðŸ¦€_vibeclaw-ff5c5c?style=for-the-badge&logoColor=white" alt="vibeclaw"></a>
          <a id="gh-stars" href="https://github.com/jasonkneen/vibeclaw/stargazers" style="display:inline-flex;align-items:center;gap:6px;padding:4px 12px;background:#1a1a1a;border:1px solid #2a2a2a;border-radius:4px;text-decoration:none;font-family:var(--mono);font-size:0.7rem;color:var(--text-dim);transition:all 0.15s;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--text-bright)'" onmouseout="this.style.borderColor='#2a2a2a';this.style.color='var(--text-dim)'"><svg viewBox="0 0 16 16" fill="currentColor" style="width:12px;height:12px;"><path d="M8 .25a.75.75 0 01.673.418l1.882 3.815 4.21.612a.75.75 0 01.416 1.279l-3.046 2.97.719 4.192a.75.75 0 01-1.088.791L8 12.347l-3.766 1.98a.75.75 0 01-1.088-.79l.72-4.194L.818 6.374a.75.75 0 01.416-1.28l4.21-.611L7.327.668A.75.75 0 018 .25z"/></svg> <span id="gh-stars-count">â˜…</span> Stars</a>
          <script>fetch('https://api.github.com/repos/jasonkneen/vibeclaw').then(r=>r.json()).then(d=>{if(d.stargazers_count!=null)document.getElementById('gh-stars-count').textContent=d.stargazers_count}).catch(()=>{})</script>
          <a href="https://github.com/jasonkneen/vibeclaw/blob/main/LICENSE"><img src="https://img.shields.io/github/license/jasonkneen/vibeclaw?style=for-the-badge&color=2a2a2a&labelColor=1a1a1a" alt="License"></a>
        </div>
      </div>
      </div>
      <div class="hero-visual">
        <canvas id="hero-canvas"></canvas>
      </div>
    </section>

    <!-- Playground -->
    <div class="pg" id="playground">
      <div class="pg-shell">
        <span class="pg-status" id="pg-status" style="display:none;"></span>

        <!-- Credential bars (swap based on mode) -->
        <div id="pg-creds-sandbox" style="display:flex;align-items:center;gap:10px;padding:8px 16px;border-bottom:1px solid var(--border);background:var(--black);">
          <label style="font-family:var(--mono);font-size:0.65rem;color:var(--text-dim);text-transform:uppercase;letter-spacing:0.06em;white-space:nowrap;">Flavour</label>
          <select id="pg-flavour-select" style="padding:6px 10px;background:var(--surface);border:1px solid var(--border);color:var(--text-bright);font-family:var(--mono);font-size:0.72rem;outline:none;opacity:0.9;max-width:180px;">
            <option value="default">ðŸ¦€ OpenClaw</option>
          </select>
          <select id="pg-model-select" style="display:none;">
            <option value="upstage/solar-pro-3:free" selected>Solar Pro 3</option>
          </select>

        </div>


        <div class="pg-body">
          <!-- â•â•â• SANDBOX PANELS â•â•â• -->
          <div class="pg-code-panel" data-panel="boot" id="pg-code-boot">
            <div class="pg-code-header"><span class="filename">boot-sandbox.js</span></div>
            <div class="pg-code-wrap"><pre><code><span class="kw">import</span> <span class="op">{</span> <span class="fn">AgentContainerManager</span> <span class="op">}</span> <span class="kw">from</span> <span class="str">'vibeclaw'</span><span class="op">;</span>

<span class="cm">// Load the OpenClaw runtime</span>
<span class="kw">const</span> snapshot <span class="op">=</span> <span class="kw">await</span> <span class="fn">fetch</span><span class="op">(</span>OPENCLAW_VFS_URL<span class="op">).</span><span class="fn">then</span><span class="op">(</span>r <span class="op">=&gt;</span> r<span class="op">.</span><span class="fn">json</span><span class="op">());</span>

<span class="kw">const</span> manager <span class="op">=</span> <span class="kw">new</span> <span class="fn">AgentContainerManager</span><span class="op">({</span>
  <span class="prop">maxContainers</span><span class="op">:</span> <span class="num">10</span><span class="op">,</span>
  <span class="prop">defaultExecutionTimeoutMs</span><span class="op">:</span> <span class="num">30_000</span><span class="op">,</span>
<span class="op">});</span>

<span class="cm">// Spawn gateway â€” your key goes direct to Anthropic</span>
<span class="kw">const</span> gw <span class="op">=</span> <span class="kw">await</span> manager<span class="op">.</span><span class="fn">spawn</span><span class="op">({</span>
  <span class="prop">id</span><span class="op">:</span> <span class="str">'openclaw-gateway'</span><span class="op">,</span>
  <span class="prop">vfsSnapshot</span><span class="op">:</span> snapshot<span class="op">,</span>
  <span class="prop">cwd</span><span class="op">:</span> <span class="str">'/openclaw'</span><span class="op">,</span>
  <span class="prop">env</span><span class="op">: {</span>
    <span class="prop">OPENROUTER_API_KEY</span><span class="op">:</span> OPENROUTER_API_KEY<span class="op">,</span>
    <span class="prop">NODE_ENV</span><span class="op">:</span> <span class="str">'production'</span><span class="op">,</span>
    <span class="prop">OPENCLAW_PORT</span><span class="op">:</span> <span class="str">'18789'</span><span class="op">,</span>
  <span class="op">},</span>
<span class="op">});</span>

<span class="kw">await</span> manager<span class="op">.</span><span class="fn">execute</span><span class="op">(</span>gw<span class="op">.</span>id<span class="op">,</span> <span class="str">`
  const loader = require('/openclaw/loader.cjs');
  loader.registerStubs();
  loader.setupEnv();
`</span><span class="op">);</span>

console<span class="op">.</span><span class="fn">log</span><span class="op">(</span><span class="str">'ðŸ¦€ OpenClaw Sandbox Gateway online!'</span><span class="op">);</span></code></pre></div>
          </div>

          <div class="pg-code-panel" data-panel="config" id="pg-code-config" hidden>
            <div class="pg-code-header"><span class="filename">config.js</span></div>
            <div class="pg-code-wrap"><pre><code><span class="cm">// Configure the sandbox agent</span>
<span class="kw">await</span> manager<span class="op">.</span><span class="fn">execute</span><span class="op">(</span>gw<span class="op">.</span>id<span class="op">,</span> <span class="str">`
  const config = require('/openclaw/config.cjs');
  config.set({</span>
    <span class="prop">agent</span><span class="op">: {</span>
      <span class="prop">name</span><span class="op">:</span> <span class="str">'Sandbox Agent'</span><span class="op">,</span>
      <span class="prop">emoji</span><span class="op">:</span> <span class="str">'ðŸ¦€'</span><span class="op">,</span>
      <span class="prop">model</span><span class="op">:</span> <span class="str">'claude-sonnet-4-20250514'</span><span class="op">,</span>
      <span class="prop">maxTokens</span><span class="op">:</span> <span class="num">16384</span><span class="op">,</span>
    <span class="op">},</span>
    <span class="prop">gateway</span><span class="op">: {</span> <span class="prop">port</span><span class="op">:</span> <span class="num">18789</span><span class="op">,</span> <span class="prop">bind</span><span class="op">:</span> <span class="str">'loopback'</span> <span class="op">},</span>
    <span class="prop">skills</span><span class="op">: {</span> <span class="prop">enableAll</span><span class="op">:</span> <span class="kw">true</span> <span class="op">},</span>
    <span class="prop">cron</span><span class="op">: {</span> <span class="prop">jobs</span><span class="op">: [{</span>
      <span class="prop">name</span><span class="op">:</span> <span class="str">'health-check'</span><span class="op">,</span>
      <span class="prop">schedule</span><span class="op">:</span> <span class="str">'*/5 * * * *'</span><span class="op">,</span>
      <span class="prop">task</span><span class="op">:</span> <span class="str">'Run a quick health check'</span><span class="op">,</span>
    <span class="op">}] },</span>
  <span class="op">});</span>
<span class="str">`</span><span class="op">);</span>

<span class="kw">await</span> manager<span class="op">.</span><span class="fn">writeFile</span><span class="op">(</span>gw<span class="op">.</span>id<span class="op">,</span> <span class="str">'/openclaw/SOUL.md'</span><span class="op">,</span> <span class="str">`
# ðŸ¦€ Sandbox Agent
You are a helpful coding assistant running
entirely in a browser sandbox.
`</span><span class="op">);</span></code></pre></div>
          </div>

          <div class="pg-code-panel" data-panel="sandbox-chat" id="pg-code-sandbox-chat" hidden>
            <div class="pg-code-header"><span class="filename">sandbox-chat.js</span></div>
            <div class="pg-code-wrap"><pre><code><span class="cm">// Chat with your sandbox agent â€” 100% in-browser</span>
<span class="cm">// Your key goes direct to Anthropic, never our servers</span>

<span class="kw">await</span> client<span class="op">.</span><span class="fn">chat</span><span class="op">(</span><span class="str">'Hello! What can you do?'</span><span class="op">, {</span>
  <span class="prop">sessionKey</span><span class="op">:</span> <span class="str">'agent:sandbox:main'</span><span class="op">,</span>
<span class="op">});</span>

<span class="cm">// âœ… Read/write files in virtual workspace</span>
<span class="cm">// âœ… Execute JavaScript and TypeScript</span>
<span class="cm">// âœ… Install npm packages</span>
<span class="cm">// âœ… Use tools (search, edit, create files)</span>
<span class="cm">// âœ… Run cron jobs on a schedule</span>
<span class="cm">// âœ… Maintain conversation history</span>

<span class="cm">// Future: WebGPU local inference â€” no API key at all</span>
<span class="cm">// import { CreateMLCEngine } from '@mlc-ai/web-llm';</span>
<span class="cm">// const engine = await CreateMLCEngine('Qwen2.5-Coder-1.5B-Instruct-q4f16_1-MLC');</span></code></pre></div>
          </div>



          <!-- Output panel -->
          <div class="pg-output-panel">
            <div class="pg-terminal-header" style="display:flex;align-items:center;justify-content:space-between;">
              <span class="label">Terminal</span>
              <a id="pg-connect-link" href="#" style="display:none;font-family:var(--mono);font-size:0.65rem;color:var(--accent);text-decoration:none;font-weight:700;">ðŸ”´ Connect â†’</a>
            </div>
            <div class="pg-terminal" id="pg-terminal" style="display:flex;align-items:center;justify-content:center;">
              <button class="pg-launch" data-action="sandbox" style="padding:16px 40px;font-family:var(--mono);font-size:1.1rem;font-weight:700;text-transform:uppercase;letter-spacing:0.05em;background:var(--accent);color:#000;border:none;cursor:pointer;display:inline-flex;align-items:center;gap:10px;transition:background 0.15s,box-shadow 0.15s;" onmouseover="this.style.background='#ff7070';this.style.boxShadow='0 0 20px rgba(255,92,92,0.3)'" onmouseout="this.style.background='var(--accent)';this.style.boxShadow='none'"><svg viewBox="0 0 24 24" fill="currentColor" style="width:16px;height:16px;"><polygon points="5 3 19 12 5 21 5 3"/></svg> Boot Your Gateway</button>
            </div>

            <div id="pg-chat-bar" style="display:none;border-top:1px solid var(--border);background:var(--surface);">
              <div style="display:flex;gap:0;">
                <input id="pg-chat-input" type="text" placeholder="Message the agentâ€¦" disabled style="flex:1;padding:16px 18px;background:transparent;border:none;color:var(--text-bright);font-family:var(--mono);font-size:0.95rem;outline:none;" />
                <button id="pg-chat-send" disabled style="padding:16px 24px;font-family:var(--mono);font-size:0.9rem;font-weight:700;text-transform:uppercase;letter-spacing:0.04em;background:var(--accent);color:#000;border:none;cursor:pointer;">Send</button>
              </div>
            </div>
            <div id="pg-forge-cta" style="display:none;border-top:1px solid var(--border);background:var(--accent-bg);padding:12px 18px;text-align:center;">
              <span style="font-family:var(--mono);font-size:0.75rem;color:var(--text);">Like this? </span>
              <a id="forge-cta-link" href="/forge.html" style="font-family:var(--mono);font-size:0.75rem;color:var(--accent);text-decoration:none;font-weight:700;display:inline-flex;align-items:center;gap:4px;"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width:12px;height:12px;"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg> Build your own server â†’</a>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      import { createContainer } from '/src/index.ts';

    (() => {
      const $ = id => document.getElementById(id);
      const terminal  = $('pg-terminal');
      const statusEl  = $('pg-status');
      const chatBar   = $('pg-chat-bar');
      const chatInput = $('pg-chat-input');
      const chatSend  = $('pg-chat-send');
      const modelSelect = $('pg-model-select');
      const flavourSelect = $('pg-flavour-select');
      const connectLink = $('pg-connect-link');

      let activeTab = 'boot';
      let pgStreamEl = null;
      let sandboxContainer = null;
      let activeFlavour = null;  // loaded flavour manifest
      let allFlavours = [];      // all available flavours

      // Load flavours
      (async () => {
        try {
          const resp = await fetch('/flavours.json');
          if (resp.ok) {
            allFlavours = await resp.json();
            flavourSelect.innerHTML = '';
            for (const f of allFlavours) {
              const opt = document.createElement('option');
              opt.value = f.id;
              opt.textContent = `${f.emoji} ${f.name}`;
              flavourSelect.appendChild(opt);
            }
            // Load user's saved servers from library
            try {
              const lib = JSON.parse(localStorage.getItem('clawforge-library') || '[]');
              if (lib.length > 0) {
                const sep = document.createElement('option');
                sep.disabled = true;
                sep.textContent = 'â”€â”€ My Servers â”€â”€';
                flavourSelect.appendChild(sep);
                for (const srv of lib) {
                  const spec = srv.spec || srv;
                  const id = 'lib:' + (srv.id || spec.id || spec.name);
                  const opt = document.createElement('option');
                  opt.value = id;
                  opt.textContent = `${spec.emoji || 'ðŸ”§'} ${spec.name || 'Custom'}`;
                  opt.dataset.libSpec = JSON.stringify(spec);
                  flavourSelect.appendChild(opt);
                }
              }
            } catch {}

            // Restore saved choice
            try { const s = localStorage.getItem('vc-flavour'); if (s && allFlavours.find(f => f.id === s)) flavourSelect.value = s; } catch {}
            activeFlavour = allFlavours.find(f => f.id === flavourSelect.value) || allFlavours[0];
          }
        } catch {}
      })();
      flavourSelect.addEventListener('change', () => {
        const val = flavourSelect.value;
        if (val.startsWith('lib:')) {
          // Load from library server spec
          const opt = flavourSelect.querySelector(`option[value="${CSS.escape(val)}"]`);
          if (opt && opt.dataset.libSpec) {
            const spec = JSON.parse(opt.dataset.libSpec);
            activeFlavour = {
              id: val,
              name: spec.name || 'Custom Server',
              emoji: spec.emoji || 'ðŸ”§',
              description: 'Saved server',
              agents: (spec.agents || []).map(a => ({
                id: a.id || 'main',
                name: a.name,
                emoji: a.emoji,
                description: a.description || a.role || ''
              })),
              teams: [],
              skills: (spec.skills || []).map(s => ({
                name: s.source ? s.source.replace('builtin:', '') : s.name || 'unknown',
                emoji: '',
                description: ''
              })),
              systemPrompt: (spec.agents && spec.agents[0] && spec.agents[0].systemPrompt) || '',
              workspace: spec.workspace || {}
            };
          }
        } else {
          activeFlavour = allFlavours.find(f => f.id === val) || allFlavours[0];
        }
        try { localStorage.setItem('vc-flavour', val); } catch {}
      });

      // â”€â”€ ClawForge preview mode â”€â”€
      let forgeSpec = null;
      (function checkForgePreview() {
        const params = new URLSearchParams(location.search);
        if (params.get('preview') === 'forge') {
          try {
            const raw = sessionStorage.getItem('forge-preview-spec');
            if (raw) {
              forgeSpec = JSON.parse(raw);
              // Convert forge spec into a flavour-compatible object
              activeFlavour = {
                id: 'forge-preview',
                name: forgeSpec.name || 'Custom Server',
                emoji: forgeSpec.emoji || 'ðŸ”§',
                description: 'ClawForge custom server',
                agents: (forgeSpec.agents || []).map(a => ({
                  id: a.id,
                  name: a.name,
                  emoji: a.emoji,
                  description: a.description || a.role || ''
                })),
                teams: [],
                skills: (forgeSpec.skills || []).map(s => ({
                  name: s.source ? s.source.replace('builtin:', '') : s.name || 'unknown',
                  emoji: 'âš¡',
                  description: ''
                })),
                systemPrompt: (forgeSpec.agents && forgeSpec.agents[0] && forgeSpec.agents[0].systemPrompt) || '',
                workspace: forgeSpec.workspace || {}
              };
              // Set model if specified
              if (forgeSpec.runtime && forgeSpec.runtime.model && forgeSpec.runtime.model.model) {
                modelSelect.value = forgeSpec.runtime.model.model;
              }
              // Update flavour select to show custom
              const opt = document.createElement('option');
              opt.value = 'forge-preview';
              opt.textContent = `${forgeSpec.emoji || 'ðŸ”§'} ${forgeSpec.name || 'Custom'} (preview)`;
              opt.selected = true;
              flavourSelect.appendChild(opt);
              // Auto-boot
              setTimeout(() => {
                document.querySelector('.pg-launch[data-action="sandbox"]')?.click();
              }, 500);
            }
          } catch (e) { console.warn('Forge preview error:', e); }
        }
      })();

      function ts() { return new Date().toLocaleTimeString('en-US', { hour12: false }); }
      function esc(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
      function md(s) {
        let h = esc(s);
        // Code blocks (```)
        h = h.replace(/```(\w*)\n([\s\S]*?)```/g, (_, lang, code) =>
          `<div class="chat-codeblock"><div class="chat-codeblock-header">${lang || 'code'}</div><pre>${code.trim()}</pre></div>`);
        // Tool calls [TOOL: name] or [tool_call: name]
        h = h.replace(/\[(TOOL|tool_call|tool|Tool|search|read|write|edit|bash|execute)[:_]?\s*([^\]]*)\]/g,
          '<span class="chat-chip">ðŸ”§ $2</span>');
        // File paths /foo/bar.js
        h = h.replace(/(^|\s)(\/[\w\-./]+\.\w+)/gm, '$1<span class="chat-file">ðŸ“„ $2</span>');
        // Bold
        h = h.replace(/\*\*(.+?)\*\*/g, '<strong style="color:var(--text-bright)">$1</strong>');
        // Italic
        h = h.replace(/\*(.+?)\*/g, '<em>$1</em>');
        // Inline code
        h = h.replace(/`([^`]+)`/g, '<code class="chat-inline-code">$1</code>');
        // Headings
        h = h.replace(/^### (.+)/gm, '<div class="chat-heading">$1</div>');
        h = h.replace(/^## (.+)/gm, '<div class="chat-heading" style="font-size:1em;">$1</div>');
        // Bullet points
        h = h.replace(/^[-â€¢] (.+)/gm, '<div class="chat-bullet">$1</div>');
        // Numbered lists
        h = h.replace(/^(\d+)\. (.+)/gm, '<div class="chat-bullet"><span style="color:var(--accent);margin-right:4px;">$1.</span> $2</div>');
        // Checkmarks
        h = h.replace(/âœ…/g, '<span style="color:var(--accent);">âœ…</span>');
        // Line breaks
        h = h.replace(/\n\n/g, '<div style="height:8px;"></div>');
        h = h.replace(/\n/g, '<br>');
        return h;
      }
      function log(msg, type = 'info') {
        const d = document.createElement('div');
        d.className = 't-' + type;
        d.innerHTML = '<span class="t-ts">[' + ts() + ']</span>' + esc(msg);
        terminal.appendChild(d);
        terminal.scrollTop = terminal.scrollHeight;
      }
      function disableBtns(v) { document.querySelectorAll('.pg-launch').forEach(b => b.disabled = v); }

      // Persist model choice
      try { const m = localStorage.getItem('oc-model'); if (m) modelSelect.value = m; } catch {}
      modelSelect.addEventListener('change', () => { try { localStorage.setItem('oc-model', modelSelect.value); } catch {} });

      // Tab switching
      document.querySelectorAll('.pg-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          const id = tab.dataset.tab;
          if (id === activeTab) return;
          document.querySelectorAll('.pg-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          document.querySelectorAll('.pg-code-panel').forEach(p => { p.hidden = p.dataset.panel !== id; });
          activeTab = id;
        });
      });

      // â”€â”€ Boot sandbox â”€â”€
      async function launchSandbox() {
        terminal.innerHTML = '';
        terminal.style.display = '';
        terminal.style.alignItems = '';
        terminal.style.justifyContent = '';
        chatBar.style.display = 'none';
        statusEl.textContent = 'Bootingâ€¦';
        disableBtns(true);
        flavourSelect.disabled = true;

        try {
          const t0 = performance.now();
          const flLabel = activeFlavour ? `${activeFlavour.emoji} ${activeFlavour.name}` : 'ðŸ¦€ OpenClaw';
          log(`Booting ${flLabel} sandboxâ€¦`, 'info');
          const resp = await fetch('/dist/openclaw/openclaw-vfs-snapshot.json');
          if (!resp.ok) throw new Error('Failed to load OpenClaw runtime (' + resp.status + ')');
          const snapshot = await resp.json();
          log('âœ“ OpenClaw runtime loaded', 'ok');

          log('Spinning up containerâ€¦', 'info');
          sandboxContainer = createContainer();
          sandboxContainer.runtime.onConsole = (method, args) => {
            const msg = args.map(a => typeof a === 'object' ? JSON.stringify(a) : String(a)).join(' ');
            log(msg, method === 'error' ? 'err' : 'log');
          };
          log('âœ“ Container ready', 'ok');

          log('Installing agent workspaceâ€¦', 'info');
          const files = snapshot.files || snapshot;
          let count = 0;
          for (const [path, content] of Object.entries(files)) {
            try {
              const dir = path.substring(0, path.lastIndexOf('/'));
              if (dir) sandboxContainer.fs.mkdirSync(dir, { recursive: true });
              if (typeof content === 'string') sandboxContainer.fs.writeFileSync(path, content);
              else if (content?.content !== undefined) sandboxContainer.fs.writeFileSync(path, content.content);
              count++;
            } catch {}
          }
          log(`âœ“ Workspace ready â€” ${count} files`, 'ok');

          log('Configuring modelâ€¦', 'info');
          sandboxContainer.runtime.execute(`process.env.NODE_ENV = 'production';`, '__env.js');
          log(`âœ“ ${modelSelect.value.split('/').pop().replace(':free','')}`, 'ok');

          log('Starting agentâ€¦', 'info');
          try {
            sandboxContainer.runtime.execute(`
              try { const l = require('/openclaw/loader.cjs'); if(l.registerStubs) l.registerStubs(); if(l.setupEnv) l.setupEnv(); console.log('âœ“ Agent runtime initialized'); } catch(e) { console.log('init: ' + e.message); }
            `, '__boot.js');
          } catch (e) { log('init: ' + e.message, 'info'); }

          const bootMs = Math.round(performance.now() - t0);
          log('', 'ok');
          log(`${flLabel} sandbox is live (${bootMs}ms)`, 'ok');
          if (activeFlavour && activeFlavour.id !== 'default') {
            log(`Flavour: ${activeFlavour.name} â€” ${activeFlavour.agents.length} agents, ${activeFlavour.skills.length} skills`, 'info');
          }
          log('', 'info');
          log('Type a message below to start chatting', 'ok');

          // Cross out "seconds" and show the real time
          const heroTime = document.getElementById('hero-time');
          if (heroTime) {
            const t = bootMs < 1000 ? `${bootMs}ms` : `${(bootMs / 1000).toFixed(1)}s`;
            heroTime.innerHTML = `<span style="text-decoration:line-through;opacity:0.4;transition:opacity 0.3s;">3s</span> <span id="hero-actual-time" style="color:var(--accent);font-weight:700;opacity:0;transform:scale(0.5);display:inline-block;transition:opacity 0.5s ease,transform 0.5s cubic-bezier(0.34,1.56,0.64,1);text-shadow:0 0 20px rgba(255,92,92,0.6);">${t}</span>`;
            requestAnimationFrame(() => requestAnimationFrame(() => {
              const el = document.getElementById('hero-actual-time');
              if (el) { el.style.opacity = '1'; el.style.transform = 'scale(1)'; }
            }));

            // Let the user see the boot time, then scroll to playground
            setTimeout(() => {
              document.querySelector('.pg').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 1200);
          }

          statusEl.textContent = 'Running';
          chatBar.style.display = '';
          chatInput.disabled = false;
          chatSend.disabled = false;
          flavourSelect.disabled = true;

          // Show forge CTA after a short delay, linking to current flavour
          setTimeout(() => {
            const forgeCta = $('pg-forge-cta');
            if (forgeCta) {
              forgeCta.style.display = '';
              const ctaLink = $('forge-cta-link');
              if (ctaLink && activeFlavour && activeFlavour.id !== 'forge-preview') {
                ctaLink.href = `/forge.html?template=${activeFlavour.id}`;
              }
            }
          }, 5000);

          // Auto-send first message
          chatInput.value = 'Hey! What can you do?';
          setTimeout(sendChat, 300);

          // Bridge to gateway demo via BroadcastChannel
          setupGatewayBridge();
        } catch (e) {
          log('Boot failed: ' + e.message, 'err');
          statusEl.textContent = 'Error';
          flavourSelect.disabled = false;
        }
        disableBtns(false);
      }

      // â”€â”€ Local gateway bridge (BroadcastChannel between tabs) â”€â”€
      function setupGatewayBridge() {
        const fl = activeFlavour || allFlavours[0] || { id: 'default', name: 'Claw', emoji: 'ðŸ¦€', agents: [
          { id: 'main', name: 'Claw', emoji: 'ðŸ¦€', description: 'Squad lead â€” orchestrator and coding assistant' }
        ], skills: [], systemPrompt: '' };

        // Build agent lookup from flavour manifest
        const agentList = fl.agents || [];
        const agentMap = {};
        for (const a of agentList) agentMap[a.id] = { name: a.name, emoji: a.emoji, description: a.description };

        // Build skills list from flavour
        const skillList = (fl.skills || []).map(s => ({ name: s.name, emoji: s.emoji, description: s.description, eligible: true, source: 'flavour' }));
        // Always include base skills
        if (!skillList.find(s => s.name === 'chat')) skillList.unshift({ name: 'chat', emoji: 'ðŸ’¬', description: 'Chat via OpenRouter (Solar Pro 3)', eligible: true, source: 'builtin' });
        if (!skillList.find(s => s.name === 'filesystem')) skillList.push({ name: 'filesystem', emoji: 'ðŸ“', description: 'Virtual filesystem read/write', eligible: true, source: 'builtin' });
        if (!skillList.find(s => s.name === 'execute')) skillList.push({ name: 'execute', emoji: 'âš¡', description: 'Run commands in container', eligible: true, source: 'builtin' });

        // Build session list from agents
        const buildSessions = () => {
          const h = window.__sandboxHistory || [];
          const now = Date.now();
          return agentList.map((a, i) => ({
            key: `agent:${a.id}:main`,
            displayName: `${a.emoji} ${a.name}`,
            label: a.name,
            model: 'solar-pro-3',
            updatedAt: now - (i * 60000),
            totalTokens: i === 0 ? h.length * 100 : 0,
            contextTokens: 4096
          }));
        };

        // Build workspace files
        const wsFiles = [
          { name: 'SOUL.md', size: 420 },
          { name: 'AGENTS.md', size: 380 },
          { name: 'TOOLS.md', size: 520 },
          { name: 'USER.md', size: 180 },
          { name: '.bashrc', size: 220 },
          { name: 'hostname', size: 12 },
          { name: 'sandbox.log', size: 45 }
        ];
        // Add team files if flavour has teams
        if (fl.teams?.length) {
          for (const t of fl.teams) wsFiles.push({ name: `teams/${t.id}.md`, size: 300 });
        }
        // Add agent files
        for (const a of agentList) {
          if (a.id !== 'main') wsFiles.push({ name: `agents/${a.id}.md`, size: 250 });
        }

        // Use forge workspace files if available, otherwise generate from flavour
        const forgeWs = fl.workspace || {};
        const wsContents = {
          'SOUL.md': forgeWs['SOUL.md'] || fl.systemPrompt || `# ${fl.emoji} ${fl.name}\n\nSandbox agent.`,
          'AGENTS.md': forgeWs['AGENTS.md'] || `# Agents\n\n${agentList.map(a => `- **${a.emoji} ${a.name}** (${a.id}) â€” ${a.description}`).join('\n')}`,
          'TOOLS.md': forgeWs['TOOLS.md'] || `# Tools\n\n${skillList.map(s => `- **${s.emoji} ${s.name}** â€” ${s.description}`).join('\n')}`,
          'USER.md': forgeWs['USER.md'] || '# User\n\nA developer exploring the sandbox.',
          '.bashrc': `# ~/.bashrc\nexport PS1="${fl.emoji} sandbox $ "\nalias ll="ls -la"`,
          'hostname': `vibeclaw-${fl.id}`,
          'sandbox.log': 'Sandbox started at ' + new Date().toISOString()
        };
        if (fl.teams) {
          for (const t of fl.teams) {
            wsContents[`teams/${t.id}.md`] = `# Team: ${t.name}\n\nLeader: ${t.leader}\nAgents: ${t.agents.join(', ')}`;
          }
        }
        for (const a of agentList) {
          if (a.id !== 'main') {
            wsContents[`agents/${a.id}.md`] = `# Agent: ${a.emoji} ${a.name}\n\n${a.description}\n\nSession: agent:${a.id}:main`;
          }
        }

        const ch = new BroadcastChannel('vibeclaw-gw');
        ch.onmessage = (evt) => {
          const msg = evt.data;
          if (msg.type === 'ping') {
            const nonce = Array.from(crypto.getRandomValues(new Uint8Array(32))).map(b => b.toString(16).padStart(2,'0')).join('');
            ch.postMessage({ type: 'event', event: 'connect.challenge', payload: { nonce } });
            return;
          }
          if (msg.type === 'req') {
            const id = msg.id;
            const m = msg.method;
            if (m === 'connect') {
              ch.postMessage({ type: 'res', id, ok: true, payload: {
                server: { host: `vibeclaw-${fl.id}`, version: '1.0.0' },
                mainSessionKey: 'agent:main:main', protocolVersion: 3
              }});
            } else if (m === 'status') {
              ch.postMessage({ type: 'res', id, ok: true, payload: {
                sessions: { count: agentList.length, defaults: { model: 'upstage/solar-pro-3:free' } },
                channelSummary: [],
                heartbeat: { defaultAgentId: 'main' },
                flavour: { id: fl.id, name: fl.name, emoji: fl.emoji }
              }});
            } else if (m === 'agents.list') {
              ch.postMessage({ type: 'res', id, ok: true, payload: { agents: agentList.map(a => ({ id: a.id })) }});
            } else if (m === 'agent.identity.get') {
              const a = agentMap[msg.params?.agentId] || agentMap.main || agentList[0];
              ch.postMessage({ type: 'res', id, ok: true, payload: a });
            } else if (m === 'sessions.list') {
              ch.postMessage({ type: 'res', id, ok: true, payload: { sessions: buildSessions() }});
            } else if (m === 'skills.status' || m === 'skills.list') {
              ch.postMessage({ type: 'res', id, ok: true, payload: { skills: skillList }});
            } else if (m === 'models.list') {
              ch.postMessage({ type: 'res', id, ok: true, payload: { models: [{ id: 'upstage/solar-pro-3:free', name: 'Solar Pro 3', active: true }] }});
            } else if (m === 'cron.list') {
              ch.postMessage({ type: 'res', id, ok: true, payload: { jobs: [] }});
            } else if (m === 'agents.files.list') {
              ch.postMessage({ type: 'res', id, ok: true, payload: { workspace: fl.id, files: wsFiles }});
            } else if (m === 'agents.files.get') {
              const name = msg.params?.name || '';
              ch.postMessage({ type: 'res', id, ok: true, payload: { workspace: fl.id, file: { name, content: wsContents[name] || '(empty)' } }});
            } else if (m === 'logs.tail' || m === 'logs.query') {
              const ts = new Date().toISOString();
              ch.postMessage({ type: 'res', id, ok: true, payload: { lines: [
                JSON.stringify({ time: ts, '2': `${fl.emoji} ${fl.name} sandbox gateway started`, _meta: { logLevelName: 'INFO' } }),
                JSON.stringify({ time: ts, '2': `Flavour: ${fl.name} (${agentList.length} agents)`, _meta: { logLevelName: 'INFO' } }),
                JSON.stringify({ time: ts, '2': 'Model: solar-pro-3 (free)', _meta: { logLevelName: 'INFO' } }),
                JSON.stringify({ time: ts, '2': 'BroadcastChannel bridge active', _meta: { logLevelName: 'DEBUG' } })
              ], cursor: 'sandbox-0' }});
            } else if (m === 'system-presence') {
              ch.postMessage({ type: 'res', id, ok: true, payload: [
                { host: `vibeclaw-${fl.id}`, mode: 'sandbox', platform: 'browser', reason: 'connect', ts: Date.now(), ip: '127.0.0.1' }
              ]});
            } else if (m === 'usage.cost') {
              ch.postMessage({ type: 'res', id, ok: true, payload: { daily: [
                { date: new Date().toISOString().slice(0,10), totalCost: 0, totalTokens: (window.__sandboxHistory||[]).length * 150 }
              ]}});
            } else if (m === 'chat.send') {
              ch.postMessage({ type: 'res', id, ok: true, payload: {} });
              const userMsg = msg.params?.message || '';
              if (!window.__sandboxHistory) window.__sandboxHistory = [];
              window.__sandboxHistory.push({ role: 'user', content: userMsg });
              const sysPrompt = fl.systemPrompt || `You are ${fl.emoji} ${fl.name}, a helpful assistant running in a browser sandbox.`;
              fetch('/api/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ messages: [{ role: 'system', content: sysPrompt }, ...window.__sandboxHistory], model: 'upstage/solar-pro-3:free' })
              }).then(r => r.json()).then(data => {
                const text = data.choices?.[0]?.message?.content || data.error || 'No response';
                window.__sandboxHistory.push({ role: 'assistant', content: text });
                ch.postMessage({ type: 'event', event: 'chat', payload: { state: 'delta', message: { content: text } }});
                ch.postMessage({ type: 'event', event: 'chat', payload: { state: 'final' }});
              }).catch(err => {
                ch.postMessage({ type: 'event', event: 'chat', payload: { state: 'error', errorMessage: err.message }});
              });
            } else if (m === 'chat.history') {
              const msgs = (window.__sandboxHistory || []).map((m, i) => ({ id: String(i), role: m.role, content: m.content, createdAt: Date.now() }));
              ch.postMessage({ type: 'res', id, ok: true, payload: { messages: msgs }});
            } else {
              ch.postMessage({ type: 'res', id, ok: true, payload: {} });
            }
          }
        };
        connectLink.href = '/examples/openclaw-gateway-demo.html?url=sandbox';
        connectLink.target = '_blank';
        connectLink.style.display = '';
        log(`ðŸ”´ Gateway ready (${fl.emoji} ${fl.name}) â€” click Connect â†’ to open dashboard`, 'ok');
      }

      // â”€â”€ Chat (direct Anthropic streaming) â”€â”€
      async function sendChat() {
        const text = chatInput.value.trim();
        if (!text) return;
        chatInput.value = '';
        chatInput.disabled = true;
        chatSend.disabled = true;
        startChatSafetyTimer();
        log(`You: ${text}`, 'log');

        if (!window.__sandboxHistory) window.__sandboxHistory = [];
        window.__sandboxHistory.push({ role: 'user', content: text });

        pgStreamEl = document.createElement('div');
        pgStreamEl.innerHTML = '<span class="t-ts">[' + ts() + ']</span><span style="color:var(--accent);">ðŸ¦€ </span>â€¦';
        terminal.appendChild(pgStreamEl);
        terminal.scrollTop = terminal.scrollHeight;

        try {
          const model = modelSelect.value;
          const isSolar = model.startsWith('upstage/solar');
          const payload = {
            model,
            max_tokens: 4096,
            stream: true,
            messages: [
              { role: 'system', content: (activeFlavour?.systemPrompt) || 'You are ðŸ¦€ Sandbox Agent, a helpful coding assistant running in a browser sandbox powered by OpenClaw + almostnode. Be concise and helpful.' },
              ...window.__sandboxHistory,
            ],
          };
          // Enable reasoning for Solar Pro
          if (isSolar) payload.reasoning = { enabled: true, effort: 'low' };

          const resp = await fetch('/api/chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload),
          });

          if (!resp.ok) {
            const err = await resp.json().catch(() => ({}));
            throw new Error(err?.error?.message || err?.error || `HTTP ${resp.status}`);
          }

          const reader = resp.body.getReader();
          const decoder = new TextDecoder();
          let full = '', reasoning = '', buf = '', inReasoning = false;

          while (true) {
            const { done, value } = await reader.read();
            if (done) break;
            buf += decoder.decode(value, { stream: true });
            const lines = buf.split('\n');
            buf = lines.pop() || '';
            for (const line of lines) {
              if (!line.startsWith('data: ')) continue;
              const data = line.slice(6).trim();
              if (data === '[DONE]') continue;
              try {
                const evt = JSON.parse(data);
                const choice = evt.choices?.[0];
                if (!choice) continue;

                // Handle reasoning content (Solar Pro)
                const deltaReasoning = choice.delta?.reasoning;
                if (deltaReasoning) {
                  reasoning += deltaReasoning;
                  if (!inReasoning) {
                    inReasoning = true;
                    pgStreamEl.innerHTML = '<span class="t-ts">[' + ts() + ']</span><span style="color:var(--text-dim);">ðŸ’­ thinkingâ€¦</span>';
                    terminal.scrollTop = terminal.scrollHeight;
                  }
                }

                // Handle regular content
                const delta = choice.delta?.content;
                if (delta) {
                  if (inReasoning) { inReasoning = false; }
                  full += delta;
                  pgStreamEl.innerHTML = '<span class="t-ts">[' + ts() + ']</span><span style="color:var(--accent);">ðŸ¦€ </span>' + md(full);
                  terminal.scrollTop = terminal.scrollHeight;
                }
              } catch {}
            }
          }

          // Preserve reasoning_details for multi-turn
          const assistantMsg = { role: 'assistant', content: full };
          if (reasoning) assistantMsg.reasoning_details = [{ type: 'text', text: reasoning }];
          window.__sandboxHistory.push(assistantMsg);
        } catch (err) {
          log('Error: ' + err.message, 'err');
        }
        pgStreamEl = null;
        chatInput.disabled = false; chatSend.disabled = false; chatInput.focus();
        // Safety: ensure re-enabled after 30s max
        clearTimeout(window.__chatUnlockTimer);
      }

      // Safety timeout â€” if chat stays locked >30s, force unlock
      function startChatSafetyTimer() {
        clearTimeout(window.__chatUnlockTimer);
        window.__chatUnlockTimer = setTimeout(() => {
          if (chatInput.disabled) {
            chatInput.disabled = false; chatSend.disabled = false; chatInput.focus();
            log('(Chat unlocked â€” response timeout)', 'info');
          }
        }, 30000);
      }

      chatSend.addEventListener('click', sendChat);
      chatInput.addEventListener('keydown', e => {
        if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendChat(); }
      });

      // Launch buttons
      document.querySelectorAll('.pg-launch').forEach(btn => {
        btn.addEventListener('click', launchSandbox);
      });
    })();
    </script>

    <!-- Secondary CTAs â€” below playground -->
    <div style="display:flex;justify-content:center;gap:12px;padding:32px 20px 48px;flex-wrap:wrap;">
      <a href="/forge.html" class="btn btn-secondary" style="display:inline-flex;align-items:center;gap:8px;"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg> Build Your Server</a>
      <a href="#demos" class="btn btn-secondary">View Demos</a>
    </div>

    <!-- Features -->
    <div class="section">
      <div class="section-header">
        <div class="section-label">01 / Why vibeclaw</div>
        <h2>The fastest way to try OpenClaw</h2>
      </div>
      <div class="features-grid">

        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
          </div>
          <h3>Instant Sandbox</h3>
          <p>Boot a full OpenClaw agent in your browser in seconds. Paste your Anthropic key and start chatting â€” no install, no Docker, no CLI.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
          </div>
          <h3>Your Key, Your Browser</h3>
          <p>API calls go direct from your browser to Anthropic. Your key never touches our servers. Close the tab and it's gone.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"/></svg>
          </div>
          <h3>Real Container Runtime</h3>
          <p>Not a mockup â€” a real Node.js container with a virtual filesystem, 40+ shimmed modules, and npm package support. Powered by almostnode.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
          </div>
          <h3>Live Gateway Mode</h3>
          <p>Already running OpenClaw? Connect to your live gateway via WebSocket. See all sessions, agents, files, skills, cron jobs, metrics â€” everything.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24"><polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/></svg>
          </div>
          <h3>Full Dashboard</h3>
          <p>3-column gateway dashboard with streaming chat, session management, workspace file browser, skill status, cron jobs, cost tracking, and live logs.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
          </div>
          <h3>Flavours</h3>
          <p>Swap sandbox personalities in one click. TinyClaw multi-agent orchestrator, default Claw assistant, or build your own â€” different agents, skills, and system prompts per flavour.</p>
        </div>

        <div class="feature-card">
          <div class="feature-icon">
            <svg viewBox="0 0 24 24"><rect x="2" y="3" width="20" height="14" rx="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
          </div>
          <h3>WebGPU Local LLM <span style="font-size:0.6rem;color:var(--text-dim);">(coming soon)</span></h3>
          <p>Run Qwen2.5-Coder 1.5B locally via WebGPU â€” no API key, no network. A fully self-contained coding agent in ~900MB.</p>
        </div>

      </div>
    </div>

    <!-- ClawForge -->
    <div class="section" id="forge">
      <div class="section-header">
        <div class="section-label">02 / ClawForge</div>
        <h2>Build your own server</h2>
      </div>

      <div style="max-width:800px;margin:0 auto;text-align:center;">
        <p style="color:var(--text);font-size:1.05rem;line-height:1.7;margin-bottom:32px;">
          Configure an OpenClaw server like you'd spec a Mac. Pick your agents, skills, personality, and workspace â€” then preview it live in your browser. When you're happy, deploy it anywhere.
        </p>

        <div class="forge-steps" style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:40px;">
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:24px 20px;text-align:center;">
            <div style="margin-bottom:12px;display:flex;justify-content:center;"><svg viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width:32px;height:32px;"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg></div>
            <h3 style="font-family:var(--sans);font-size:0.95rem;color:var(--text-bright);margin-bottom:8px;">Configure</h3>
            <p style="font-size:0.8rem;color:var(--text-dim);line-height:1.5;">Pick agents, skills, prompts, and workspace files from the component library.</p>
          </div>
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:24px 20px;text-align:center;">
            <div style="margin-bottom:12px;display:flex;justify-content:center;"><svg viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width:32px;height:32px;"><polygon points="5 3 19 12 5 21 5 3"/></svg></div>
            <h3 style="font-family:var(--sans);font-size:0.95rem;color:var(--text-bright);margin-bottom:8px;">Preview</h3>
            <p style="font-size:0.8rem;color:var(--text-dim);line-height:1.5;">Test your server live in the browser. Chat with it. Tweak until it's perfect.</p>
          </div>
          <div style="background:var(--surface);border:1px solid var(--border);border-radius:12px;padding:24px 20px;text-align:center;">
            <div style="margin-bottom:12px;display:flex;justify-content:center;"><svg viewBox="0 0 24 24" fill="none" stroke="var(--accent)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width:32px;height:32px;"><path d="M22 2L11 13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg></div>
            <h3 style="font-family:var(--sans);font-size:0.95rem;color:var(--text-bright);margin-bottom:8px;">Deploy</h3>
            <p style="font-size:0.8rem;color:var(--text-dim);line-height:1.5;">Download, Docker, CLI, or one-click deploy to Railway, Fly.io, Render & more.</p>
          </div>
        </div>

        <div style="display:flex;gap:12px;justify-content:center;flex-wrap:wrap;">
          <a href="/forge.html" class="btn btn-primary" style="background:var(--accent);color:#000;border:1px solid var(--accent);display:inline-flex;align-items:center;gap:8px;cursor:pointer;font-size:0.85rem;padding:12px 28px;text-decoration:none;">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="width:14px;height:14px;"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg> Start Building
          </a>
        </div>
      </div>
    </div>

    <!-- P2P / Community (preview only) -->
    <div class="section" id="p2p-section" style="display:none;">
      <div class="section-header">
        <div class="section-label">03 / Peer to Peer</div>
        <h2>Share, connect, collaborate</h2>
        <p style="color:var(--text-dim);font-size:0.85rem;margin-top:8px;">Your servers, your network. Share configs, connect to friends' gateways, or browse community creations.</p>
      </div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:16px;max-width:1100px;margin:0 auto;">
        <div style="border:1px solid var(--border);border-radius:10px;padding:24px;background:var(--surface);">
          <div style="font-size:1.4rem;margin-bottom:10px;">ðŸ”—</div>
          <h3 style="font-family:var(--sans);font-size:1rem;font-weight:700;color:var(--text-bright);margin:0 0 8px;">Share Server Configs</h3>
          <p style="font-family:var(--mono);font-size:0.75rem;color:var(--text);line-height:1.6;">Publish your server configs to the community. One-click import â€” anyone can boot your agent setup in seconds.</p>
        </div>
        <div style="border:1px solid var(--border);border-radius:10px;padding:24px;background:var(--surface);">
          <div style="font-size:1.4rem;margin-bottom:10px;">ðŸŒ</div>
          <h3 style="font-family:var(--sans);font-size:1rem;font-weight:700;color:var(--text-bright);margin:0 0 8px;">Connect to Live Gateways</h3>
          <p style="font-family:var(--mono);font-size:0.75rem;color:var(--text);line-height:1.6;">Connect directly to a friend's running OpenClaw gateway. Chat with their agents, browse their workspace â€” peer to peer.</p>
        </div>
        <div style="border:1px solid var(--border);border-radius:10px;padding:24px;background:var(--surface);">
          <div style="font-size:1.4rem;margin-bottom:10px;">ðŸª</div>
          <h3 style="font-family:var(--sans);font-size:1rem;font-weight:700;color:var(--text-bright);margin:0 0 8px;">Community Library</h3>
          <p style="font-family:var(--mono);font-size:0.75rem;color:var(--text);line-height:1.6;">Browse servers built by the community. Security auditors, creative studios, DevOps squads â€” find and fork what works.</p>
        </div>
        <div style="border:1px solid var(--border);border-radius:10px;padding:24px;background:var(--surface);">
          <div style="font-size:1.4rem;margin-bottom:10px;">ðŸ”’</div>
          <h3 style="font-family:var(--sans);font-size:1rem;font-weight:700;color:var(--text-bright);margin:0 0 8px;">Private P2P Mesh</h3>
          <p style="font-family:var(--mono);font-size:0.75rem;color:var(--text);line-height:1.6;">Teams can link their gateways into a private mesh. Shared agent routing, distributed skills, unified session history.</p>
        </div>
      </div>
    </div>
    <script>
      if (VibeclawFeatures && VibeclawFeatures.isPreview()) {
        document.getElementById('p2p-section').style.display = '';
      }
    </script>

    <!-- Demos -->
    <div class="section" id="demos">
      <div class="section-header">
        <div class="section-label">03 / Demos</div>
        <h2>Try it live</h2>
      </div>
      <div class="demos-grid">

        <a class="demo-card" href="./examples/openclaw-gateway-demo.html">
          <h3>ðŸ¦€ Gateway Dashboard</h3>
          <p>Full 3-column dashboard â€” connect to your live OpenClaw gateway and see everything: sessions, chat, files, skills, cron, metrics, logs.</p>
          <span class="demo-tag">openclaw Â· gateway Â· live</span>
        </a>

        <a class="demo-card" href="./examples/openclaw-demo.html">
          <h3>ðŸ¦ž Clawe Squad Manager</h3>
          <p>Spin up a multi-agent squad â€” 4 AI agents with workspaces, kanban task board, and coordinated task execution.</p>
          <span class="demo-tag">clawe Â· multi-agent Â· kanban</span>
        </a>



        <a class="demo-card" href="./examples/index.html">
          <h3>âš¡ HTTP Server</h3>
          <p>Run a Node.js HTTP server entirely in the browser. The foundation that makes everything else possible.</p>
          <span class="demo-tag">almostnode Â· http Â· require()</span>
        </a>

        <a class="demo-card" href="./examples/openclaw-connect-demo.html">
          <h3>ðŸ”Œ Connect Demo</h3>
          <p>Minimal example â€” connect to an OpenClaw gateway, authenticate, and make your first API call.</p>
          <span class="demo-tag">websocket Â· gateway Â· json-rpc</span>
        </a>

      </div>
    </div>

    <!-- Pricing (preview only) -->
    <div class="section" id="pricing-section" style="display:none;">
      <div class="section-header">
        <div class="section-label">05 / Pricing</div>
        <h2>Simple, transparent pricing</h2>
        <p style="color:var(--text-dim);font-size:0.85rem;margin-top:8px;">Free forever for open models. Upgrade for premium AI and cloud features.</p>
      </div>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;max-width:900px;margin:0 auto;">
        <!-- Free -->
        <div style="border:1px solid var(--border);border-radius:12px;padding:28px 24px;background:var(--surface);">
          <div style="font-family:var(--mono);font-size:0.7rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-dim);margin-bottom:4px;">Free</div>
          <div style="font-family:var(--sans);font-size:2rem;font-weight:800;color:var(--text-bright);margin-bottom:4px;">$0<span style="font-size:0.8rem;font-weight:400;color:var(--text-dim);">/mo</span></div>
          <div style="font-size:0.8rem;color:var(--text-dim);margin-bottom:20px;">Perfect for trying things out</div>
          <ul style="list-style:none;padding:0;margin:0 0 24px;font-family:var(--mono);font-size:0.75rem;color:var(--text);line-height:2.2;">
            <li>âœ… Build unlimited server configs</li>
            <li>âœ… 7 free AI models (Solar, Llama, Gemmaâ€¦)</li>
            <li>âœ… Sandbox preview & chat</li>
            <li>âœ… Export & import configs</li>
            <li>âœ… Browse community servers</li>
            <li style="color:var(--text-dim);">â€” 50 messages/day</li>
          </ul>
          <div style="padding:10px;border:1px solid var(--border);border-radius:8px;text-align:center;font-family:var(--mono);font-size:0.75rem;color:var(--text-dim);">Current plan</div>
        </div>
        <!-- Pro -->
        <div style="border:2px solid var(--accent);border-radius:12px;padding:28px 24px;background:var(--surface);position:relative;box-shadow:0 0 30px rgba(255,92,92,0.08);">
          <div style="position:absolute;top:-12px;right:20px;background:var(--accent);color:#000;font-family:var(--mono);font-size:0.6rem;font-weight:700;padding:3px 10px;border-radius:20px;text-transform:uppercase;letter-spacing:0.04em;">Popular</div>
          <div style="font-family:var(--mono);font-size:0.7rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--accent);margin-bottom:4px;">Pro</div>
          <div style="font-family:var(--sans);font-size:2rem;font-weight:800;color:var(--text-bright);margin-bottom:4px;">$20<span style="font-size:0.8rem;font-weight:400;color:var(--text-dim);">/mo</span></div>
          <div style="font-size:0.8rem;color:var(--text-dim);margin-bottom:20px;">For developers who ship</div>
          <ul style="list-style:none;padding:0;margin:0 0 24px;font-family:var(--mono);font-size:0.75rem;color:var(--text);line-height:2.2;">
            <li>âœ… Everything in Free, plus:</li>
            <li>âš¡ Claude Opus 4.6, GPT-5.2, Gemini 3 Pro, o3</li>
            <li>âš¡ Cloud sync â€” access anywhere</li>
            <li>âš¡ Unlimited messages</li>
            <li>âš¡ Publish & share servers P2P</li>
            <li>âš¡ Connect to friends' gateways</li>
            <li>âš¡ Priority support</li>
          </ul>
          <button onclick="VibeclawFeatures.openCheckout()" style="width:100%;padding:12px;border:none;border-radius:8px;background:var(--accent);color:#000;font-family:var(--mono);font-size:0.8rem;font-weight:700;cursor:pointer;transition:all 0.15s;text-transform:uppercase;letter-spacing:0.04em;" onmouseover="this.style.background='#ff7070';this.style.boxShadow='0 0 20px rgba(255,92,92,0.3)'" onmouseout="this.style.background='var(--accent)';this.style.boxShadow=''">Upgrade to Pro</button>
          <div style="text-align:center;margin-top:8px;font-family:var(--mono);font-size:0.65rem;color:var(--text-dim);">or $200/year (save $40)</div>
        </div>
        <!-- Team -->
        <div style="border:1px solid var(--border);border-radius:12px;padding:28px 24px;background:var(--surface);">
          <div style="font-family:var(--mono);font-size:0.7rem;text-transform:uppercase;letter-spacing:0.06em;color:var(--text-dim);margin-bottom:4px;">Team</div>
          <div style="font-family:var(--sans);font-size:2rem;font-weight:800;color:var(--text-bright);margin-bottom:4px;">$40<span style="font-size:0.8rem;font-weight:400;color:var(--text-dim);">/user/mo</span></div>
          <div style="font-size:0.8rem;color:var(--text-dim);margin-bottom:20px;">For teams building together</div>
          <ul style="list-style:none;padding:0;margin:0 0 24px;font-family:var(--mono);font-size:0.75rem;color:var(--text);line-height:2.2;">
            <li>âœ… Everything in Pro, plus:</li>
            <li>ðŸ¢ Shared team server library</li>
            <li>ðŸ¢ P2P mesh â€” connect team gateways</li>
            <li>ðŸ¢ Team usage analytics & billing</li>
            <li>ðŸ¢ Bring your own API keys</li>
            <li>ðŸ¢ Managed hosting (add-on)</li>
            <li>ðŸ¢ SLA & priority support</li>
          </ul>
          <button style="width:100%;padding:12px;border:1px solid var(--border);border-radius:8px;background:transparent;color:var(--text-bright);font-family:var(--mono);font-size:0.8rem;font-weight:600;cursor:pointer;transition:all 0.15s;text-transform:uppercase;letter-spacing:0.04em;" onmouseover="this.style.borderColor='var(--accent)';this.style.color='var(--accent)'" onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--text-bright)'">Coming Soon</button>
        </div>
      </div>
    </div>
    <script>
      if (VibeclawFeatures && VibeclawFeatures.isPreview()) {
        document.getElementById('pricing-section').style.display = '';
      }
    </script>

    <!-- FAQ -->
    <div class="section">
      <div class="section-header">
        <div class="section-label">06 / FAQ</div>
        <h2>Common questions</h2>
      </div>
      <div class="faq-list">

        <details class="faq-item">
          <summary>What's the difference between Sandbox and Live mode?</summary>
          <div class="faq-answer"><strong>Sandbox</strong> boots an isolated OpenClaw container right in your browser â€” just paste your Anthropic API key and start chatting. No server, no install, nothing to configure.<br><br><strong>Live</strong> connects to your actual running OpenClaw gateway via WebSocket. You get the full dashboard â€” all sessions, agents, files, skills, cron jobs, cost tracking, and logs from your real system.</div>
        </details>

        <details class="faq-item">
          <summary>Is my API key safe?</summary>
          <div class="faq-answer">Yes. In sandbox mode, your Anthropic API key stays in your browser and goes directly to Anthropic's API. It's never sent to our servers. It's stored in localStorage so you don't have to re-enter it, but you can clear it anytime. In live mode, no API key is needed â€” just the gateway token from your OpenClaw config.</div>
        </details>

        <details class="faq-item">
          <summary>How does the sandbox actually work?</summary>
          <div class="faq-answer">vibeclaw uses <strong>almostnode</strong> â€” a browser-native Node.js runtime with a virtual filesystem, 40+ shimmed modules, and npm support. It creates a real container, loads the OpenClaw VFS snapshot (67 files), and bootstraps the full runtime. Chat calls go direct to the Anthropic API from your browser.</div>
        </details>

        <details class="faq-item">
          <summary>What can I do in live gateway mode?</summary>
          <div class="faq-answer">Everything. The dashboard shows all your sessions with token usage bars, agent identity and workspace files (SOUL.md, MEMORY.md, etc.), active and available skills, cron jobs with status, daily cost sparklines, connected nodes, gateway logs, and full streaming chat. It uses the same 80+ method JSON-RPC API that the OpenClaw control panel uses.</div>
        </details>

        <details class="faq-item">
          <summary>Do I need to install anything?</summary>
          <div class="faq-answer">No. For sandbox mode, just open the page and paste your Anthropic API key. For live mode, you need a running OpenClaw gateway â€” paste the gateway token and URL (defaults to <code>localhost:18789</code> via the Vite proxy).</div>
        </details>

        <details class="faq-item">
          <summary>What are Flavours?</summary>
          <div class="faq-answer">Flavours are preconfigured sandbox personalities. Each flavour defines its own agents, skills, system prompt, and workspace layout. The default <strong>ðŸ¦€ Claw</strong> is a coding assistant. <strong>ðŸ¦ž TinyClaw</strong> is a multi-agent orchestrator with 5 agents, team routing, and parallel fan-out. Select a flavour from the dropdown before booting â€” the entire sandbox (and gateway dashboard) adapts to match.</div>
        </details>

        <details class="faq-item">
          <summary>What about WebGPU / local models?</summary>
          <div class="faq-answer">Coming soon. We're integrating <a href="https://github.com/mlc-ai/web-llm">WebLLM</a> to run <strong>Qwen2.5-Coder 1.5B</strong> (4-bit quantized, ~900MB) entirely via WebGPU compute shaders. One download, then fully offline â€” no API key, no network. The almostnode container runtime is ready, we're wiring up the inference engine.</div>
        </details>

        <details class="faq-item">
          <summary>Can I use this in production?</summary>
          <div class="faq-answer">The sandbox is experimental â€” great for trying OpenClaw, testing prompts, and quick prototyping. For production workloads, run a real OpenClaw gateway and use live mode to monitor and chat with it from anywhere.</div>
        </details>

      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="footer-links">
        <a href="https://openclaw.ai">OpenClaw</a>
        <a href="https://github.com/macaly/almostnode">almostnode</a>
        <a href="https://github.com/jasonkneen/vibeclaw">GitHub</a>
        <a href="https://x.com/i/communities/2022846557700145266" style="display:inline-flex;align-items:center;gap:4px;"><svg viewBox="0 0 24 24" fill="currentColor" style="width:12px;height:12px;"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>Community</a>
        <a href="./docs/">Docs</a>
      </div>
      <span class="footer-byline">ðŸ¦€ <a href="https://vibeclaw.dev">vibeclaw.dev</a></span>
      <span class="license">MIT License</span>
    </footer>

    <!-- ASCII Donut -->
    <script>
    (function() {
      var cvs = document.getElementById('hero-canvas');
      if (!cvs) return;

      function init() {
        var par = cvs.parentElement;
        var W = par.clientWidth;
        var H = par.clientHeight;
        if (!W || !H) return;
        var dpr = window.devicePixelRatio || 1;

        cvs.width = W * dpr;
        cvs.height = H * dpr;

        var ctx = cvs.getContext('2d');
        ctx.scale(dpr, dpr);

        var CHARS = '.,-~:;=!*#$@';
        var CL = CHARS.length;
        var COLS = 40, ROWS = 22;
        var cw = W / COLS, ch = H / ROWS;
        var fs = Math.max(11, Math.min(cw * 1.4, ch * 0.95));

        var A = 0.5, B = 0.3;
        var running = true;
        var raf = 0;

        function render() {
          if (!running) return;

          ctx.clearRect(0, 0, W, H);

          var grad = ctx.createRadialGradient(W / 2, H / 2, 0, W / 2, H / 2, W * 0.45);
          grad.addColorStop(0, 'rgba(255, 60, 60, 0.12)');
          grad.addColorStop(1, 'transparent');
          ctx.fillStyle = grad;
          ctx.fillRect(0, 0, W, H);

          var out = new Int8Array(COLS * ROWS);
          var zb = new Float32Array(COLS * ROWS);
          for (var k = 0; k < out.length; k++) out[k] = -1;

          var sA = Math.sin(A), cA = Math.cos(A);
          var sB = Math.sin(B), cB = Math.cos(B);

          // Claw opens and closes
          var clawOpen = 0.5 + 0.3 * Math.sin(A * 1.5);
          // Scale everything up
          var S = 0.9;

          function plot(x, y, z, nx, ny, nz) {
            x *= S; y *= S; z *= S;
            // Flatten Z for lobster-claw look
            z *= 0.65; nz *= 0.65;
            // Rotate around X by A
            var ry = y * cA - z * sA;
            var rz = y * sA + z * cA;
            // Rotate around Y by B
            var rx = x * cB + rz * sB;
            rz = -x * sB + rz * cB;

            var D = 1 / (rz + 12);
            var px = (COLS / 2 + 52 * D * rx) | 0;
            var py = (ROWS / 2 + 26 * D * ry) | 0;

            // Rotate normals
            var rny = ny * cA - nz * sA;
            var rnz = ny * sA + nz * cA;
            var rnx = nx * cB + rnz * sB;
            rnz = -nx * sB + rnz * cB;

            // Key light + fill light + ambient
            var key = rnx * 0.4 + rny * 0.5 + rnz * 0.6;
            var fill = -rnx * 0.2 + rny * 0.3 - rnz * 0.2;
            var light = Math.max(key, 0) + Math.max(fill, 0) * 0.5 + 0.25;
            var lum = (light * CL) | 0;
            if (lum < 0) lum = 0;
            if (lum >= CL) lum = CL - 1;

            var idx = px + COLS * py;
            if (py >= 0 && py < ROWS && px >= 0 && px < COLS && D > zb[idx]) {
              zb[idx] = D;
              out[idx] = lum;
            }
          }

          // â”€â”€ PINCERS: two fat curved tapered tubes â”€â”€
          var R = 2.2, maxP = Math.PI * 0.85;
          for (var side = -1; side <= 1; side += 2) {
            for (var p = 0; p < maxP; p += 0.012) {
              var frac = p / maxP;
              // Fat at base, pointed at tip
              var tubeR = 1.1 * (1 - 0.78 * frac);
              // Centerline: arc from base â†’ tip
              var cx = R * (1 - Math.cos(p));
              var cy = (R * Math.sin(p) + clawOpen) * side;
              // Tangent & normal to arc
              var dtx = R * Math.sin(p);
              var dty = R * Math.cos(p) * side;
              var tl = Math.sqrt(dtx * dtx + dty * dty) || 1;
              dtx /= tl; dty /= tl;
              var nnx = -dty, nny = dtx;
              // Cross-section loop
              for (var t = 0; t < 6.28; t += 0.05) {
                var ct = Math.cos(t), st = Math.sin(t);
                plot(
                  cx + tubeR * ct * nnx,
                  cy + tubeR * ct * nny,
                  tubeR * st,
                  ct * nnx, ct * nny, st
                );
              }
            }
          }

          // â”€â”€ JOINT: sphere at base â”€â”€
          var jR = 1.3;
          for (var p = 0; p < 3.14; p += 0.06) {
            var sp = Math.sin(p), cp = Math.cos(p);
            for (var t = 0; t < 6.28; t += 0.06) {
              var st = Math.sin(t), ct = Math.cos(t);
              plot(
                jR * sp * ct - 0.4,
                jR * sp * st,
                jR * cp,
                sp * ct, sp * st, cp
              );
            }
          }

          // â”€â”€ ARM: tapered cylinder extending backward â”€â”€
          for (var p = 0; p < 3.5; p += 0.05) {
            var aR = 1.1 - 0.1 * p;
            var ax = -0.4 - p * 0.8;
            for (var t = 0; t < 6.28; t += 0.05) {
              var ct = Math.cos(t), st = Math.sin(t);
              plot(ax, aR * ct, aR * st, 0, ct, st);
            }
          }

          // â”€â”€ RENDER ASCII â”€â”€
          ctx.font = fs + "px 'Fragment Mono','JetBrains Mono',monospace";
          ctx.textBaseline = 'middle';
          ctx.textAlign = 'center';

          for (var j = 0; j < ROWS; j++) {
            for (var i = 0; i < COLS; i++) {
              var ci = out[i + COLS * j];
              if (ci >= 0) {
                var b = ci / (CL - 1);
                ctx.fillStyle = 'rgba(255,100,100,' + (0.85 + b * 0.15).toFixed(2) + ')';
                if (b > 0) {
                  ctx.shadowColor = '#ff6666';
                  ctx.shadowBlur = 14 + b * 30;
                } else {
                  ctx.shadowBlur = 0;
                }
                ctx.fillText(CHARS[ci], i * cw + cw / 2, j * ch + ch / 2);
              }
            }
          }
          ctx.shadowBlur = 0;

          A += 0.007;
          B += 0.005;
          raf = requestAnimationFrame(render);
        }

        var obs = new IntersectionObserver(function(entries) {
          if (entries[0].isIntersecting) {
            running = true;
            render();
          } else {
            running = false;
            cancelAnimationFrame(raf);
          }
        });
        obs.observe(cvs);
      }

      document.fonts.ready.then(init);
    })();
    </script>

    <script src="/auth.js"></script>
    <script src="/features.js"></script>
    <script>
      VibeclawAuth.init().then(() => {
        VibeclawAuth.renderButton('auth-container');
        VibeclawFeatures.renderUpgradeButton('upgrade-container');
        VibeclawFeatures.checkPro();
      });
    </script>

  </body>
</html>
